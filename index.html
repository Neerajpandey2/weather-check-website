<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather app</title>
    <!-- Adding Bootstrap through links -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <style>
      .alert{
                
                 margin-bottom: 0.5px;
                 padding:0px;
      }
     
      

    </style>
</head>
<body>
  <div class="container mt-1">
    <h1 class="text-center bg-warning p-1 rounded">Weather Check</h1>
  </div>
 <!-- alert if location not found active from the catch block -->
  <div class="container">
  <div class="alert alert-warning alert-dismissible fade " role="alert">
    <strong class="ms-2">location not found!</strong> 
  </div>
  </div>
    <div class="container custom-container d-flex flex-column justify-content-center align-items-center mt-4 ms-0" >
        <!-- Search Input -->
        <div class="mb-1">
            <div class="input-group">
                <input type="text" class="form-control " id="Input" placeholder="Search location...">
                <button class="btn btn-primary" id="search" type="button">Search</button>
            </div>
        </div>

        <!-- Weather Card -->
        <div class="container d-flex justify-content-center" >
            <div class="card h-100"  style="width: 18rem;">
                <h2 class="bg-primary rounded text-center mb-1 p-1"><span id="placeH">   </span></h2>
              

                <img src="image.png" class="card-img-top" alt="weather image">
                
                <div class="bg-warning p-2" id="detail">
                    <p class="mb-0">Place name :     <span class="ms-4" id="placeN"></span></p>
                    <p class="mb-0">Region :         <span class="ms-5" id="region"></span></p>
                    <p>Country :                     <span class="ms-5" id="country"> </span></p>
                   
                </div>
                <div class="card-body">
                    <h6 class="card-title">Temperature : <span class="ms-4" id="temp"></span></h6>
                    <h6 class="card-text">Humidity    : <span class="ms-5" id="humi"></span></h6>
                    <h6 class="card-text">Wind speed : <span class="ms-4"id="wspeed"></span></h6>
                    <h6 class="card-text">Today sky  : <span class="ms-5" id="sky" ></span></h6>
                </div>
                <div class="card-footer">
                    <small class="text-body-secondary">Last updated: <span id="date"></span></small>
                </div>
            </div>
        </div>
    </div>
</body>
<script>

 let place = ' ';
 const apiKey = "ea203bf37e3141f8919120547250401";

 if(navigator.geolocation){
    navigator.geolocation.getCurrentPosition(
        (position)=>{

           const latitude =  position.coords.latitude;
           const longitude =  position.coords.longitude;
           place = `${latitude},${longitude}`;
        
    fetch(`https://api.weatherapi.com/v1/current.json?key=${apiKey}&q=${place}`)
      .then(response => {
        return response.json();
      })
      .then(data => {
        let name = data.location.name;
        let region = data.location.region;
        let country = data.location.country;
        let temperature = data.current.temp_c;
        let humidity = data.current.humidity;
        let wind = data.current.wind_kph;
        let sky = data.current.condition.text;
        let date = new Date(data.current.last_updated).toLocaleString('en-IN', { hour12: true }); // Convert date to Indian format

        document.querySelector('#placeH').innerText = name;
        document.querySelector('#placeN').innerText = name;
        document.querySelector('#region').innerText = region;
        document.querySelector('#country').innerText = country;
        document.querySelector('#temp').innerText = `${temperature} 째C`;
        document.querySelector('#humi').innerText = `${humidity} %`;
        document.querySelector('#wspeed').innerText = `${wind} km/h`;
        document.querySelector('#sky').innerText = sky;
        document.querySelector('#date').innerText = date;
      })
      .catch(error => {
        console.error('Error fetching data:', error);
        })
        })
    
    }
    
    document.querySelector('#search').addEventListener('click', function() {
    let inputValue = document.querySelector('#Input').value;
    place = `${inputValue}`;
    document.querySelector('#placeH').innerText = place;

    fetch(`https://api.weatherapi.com/v1/current.json?key=${apiKey}&q=${place}`)
      .then(response => {
        return response.json();
      })
      .then(data => {

        let name = data.location.name;
        let region = data.location.region;
        let country = data.location.country;
        let temperature = data.current.temp_c;
        let humidity = data.current.humidity;
        let wind = data.current.wind_kph;
        let sky = data.current.condition.text;
        let date = new Date(data.current.last_updated).toLocaleString('en-IN', { hour12: true }); // Convert date to Indian format

        document.querySelector('#placeN').innerText =   `${   name}`;
        document.querySelector('#region').innerText =  `${    region}`;
        document.querySelector('#country').innerText = country;
        document.querySelector('#temp').innerText = `${temperature} 째C`;
        document.querySelector('#humi').innerText = `${humidity} %`;
        document.querySelector('#wspeed').innerText = `${wind} km/h`;
        document.querySelector('#sky').innerText = sky;
        document.querySelector('#date').innerText = date;
        
      })
      .catch(error => {
        console.error('Error fetching data:', error);
        let element = document.querySelector('.alert');
        element.classList.add('show'); // Logs all the classes of the element
        setTimeout(() => {
                 element.classList.remove('show');
             }, 3000); // 2000 milliseconds = 2 seconds


      
              
      });
  });



//     fetch(`http://api.weatherapi.com/v1/current.json?key=${apiKey}&q=${place}`)
//       .then(response => {
//         return response.json();
//       })
//       .then(data => {
  
//         let region = data.location.region;
//         let country = data.location.country;
//         let temperature = data.current.temp_c;
//         let humidity = data.current.humidity;
//         let wind = data.current.wind_kph;
//         let sky = data.current.condition.text;
//         let date = new Date(data.current.last_updated).toLocaleString('en-IN', { hour12: true }); // Convert date to Indian format

//         document.querySelector('#region').innerText = region;
//         document.querySelector('#country').innerText = country;
//         document.querySelector('#temp').innerText = `${temperature} 째C`;
//         document.querySelector('#humi').innerText = `${humidity} %`;
//         document.querySelector('#wspeed').innerText = `${wind} km/h`;
//         document.querySelector('#sky').innerText = sky;
//         document.querySelector('#date').innerText = date;
//       })
//       .catch(error => {
//         console.error('Error fetching data:', error);
//         let element = document.querySelector('.alert');
//         element.classList.add('show'); // Logs all the classes of the element
//         setTimeout(() => {
//                  element.classList.remove('show');
//              }, 3000); // 2000 milliseconds = 2 seconds


      
              
//       });
//   });

//     fetch(`http://api.weatherapi.com/v1/current.json?key=${apiKey}&q=${place}`)
//       .then(response => {
//         return response.json();
//       })
//       .then(data => {
  
//         let region = data.location.region;
//         let country = data.location.country;
//         let temperature = data.current.temp_c;
//         let humidity = data.current.humidity;
//         let wind = data.current.wind_kph;
//         let sky = data.current.condition.text;
//         let date = new Date(data.current.last_updated).toLocaleString('en-IN', { hour12: true }); // Convert date to Indian format

//         document.querySelector('#region').innerText = region;
//         document.querySelector('#country').innerText = country;
//         document.querySelector('#temp').innerText = `${temperature} 째C`;
//         document.querySelector('#humi').innerText = `${humidity} %`;
//         document.querySelector('#wspeed').innerText = `${wind} km/h`;
//         document.querySelector('#sky').innerText = sky;
//         document.querySelector('#date').innerText = date;
//       })
//       .catch(error => {
//         console.error('Error fetching data:', error);
//         let element = document.querySelector('.alert');
//         element.classList.add('show'); // Logs all the classes of the element
//         setTimeout(() => {
//                  element.classList.remove('show');
//              }, 3000); // 2000 milliseconds = 2 seconds


      
              
//       });
//   });
  
  
 
</script>
</html>
